(this.webpackJsonpchorderator=this.webpackJsonpchorderator||[]).push([[0],{429:function(e,t,a){},430:function(e,t,a){},519:function(e,t,a){},520:function(e,t,a){},526:function(e,t){},527:function(e,t){},535:function(e,t){},545:function(e,t){},546:function(e,t){},547:function(e,t){},555:function(e,t){},604:function(e,t,a){},611:function(e,t,a){},614:function(e,t,a){"use strict";a.r(t);var n,s,r=a(1),i=a.n(r),l=a(67),o=a.n(l),c=(a(429),a(8)),d=(a(430),a(2)),h=a(4),u=a(5),j=a(6),p=a(29),m=a(20),b=a(622),g=a(620),y=a(616),x=a(618),O=a(627),v=a(167),f=a(626),_=a(621),S=a(628),k=a(629),C=a(423),T=a(77),w=a(419),P=a(314),I=a.n(P),A="http://127.0.0.1:5000";function M(e,t,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"get",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;"get"===s?I.a.get(n+e).then((function(e){null!==i&&i(e.data),t.setState(Object(T.a)({},a,e.data))}),(function(e){w.b.warn({content:"Sorry, something wrong happened to the server!",key:"message"}),console.log(e)})):I.a.post(n+e,r).then((function(e){null!==i&&i(e.data),t.setState(Object(T.a)({},a,e.data))}),(function(e){w.b.warn({content:"Sorry, something wrong happened to the server!",key:"message"}),console.log(e)}))}n="http://127.0.0.1:5000/api/chorderator_back_end",s=A;var N=[{value:"4/4",ui:"4/4"},{value:"3/4",ui:"3/4"}],z=[{value:"maj",ui:"Major"},{value:"min",ui:"Minor"}],R=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"],L=[{value:"pop_standard",ui:"Pop Standard"},{value:"pop_complex",ui:"Pop Complex"},{value:"dark",ui:"Dark"},{value:"r&b",ui:"R&B"}],D=a(279),V=a.n(D),E=a(24),F=b.a.Option,B={labelCol:{span:6},wrapperCol:{span:14}},q=function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={chordStyleControl:!0,textureStyleControl:!0,values:null},e.onFinish=function(t){M("/generate",Object(m.a)(e),null,"post",t),V.a.publish("submit",t)},e.normFile=function(e){return Array.isArray(e)?e:e&&e.fileList},e.add=function(){},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return Object(E.jsxs)("div",{children:[Object(E.jsxs)(g.a,Object(p.a)(Object(p.a)({name:"validate_other"},B),{},{onFinish:this.onFinish,initialValues:{tonic:"C",meter:"4/4",mode:"maj",chord_style:"pop_standard",rhythm_density:2,voice_number:2,enable_texture_style:!0,enable_chord_style:!0},children:[Object(E.jsx)(y.a,{orientation:"left",children:"Set Melody"}),Object(E.jsx)(g.a.Item,{label:"Upload Melody MIDI",name:"midi",valuePropName:"fileList",getValueFromEvent:this.normFile,hasFeedback:!0,rules:[{required:!0,message:"Please upload your melody MIDI!"}],children:Object(E.jsxs)(x.a.Dragger,{name:"midi",action:"".concat(n,"/upload_melody"),accept:".mid",maxCount:1,children:[Object(E.jsx)("p",{className:"ant-upload-drag-icon",children:Object(E.jsx)(S.a,{})}),Object(E.jsx)("p",{className:"ant-upload-text",children:"Click or drag MIDI file to this area to upload"})]})}),Object(E.jsx)(y.a,{orientation:"left",children:"Set Phrase"}),Object(E.jsx)(g.a.Item,{name:"phrases",label:"Phrases",rules:[{required:!0,message:"Please set the phrase of the melody"}],children:Object(E.jsx)(g.a.List,{name:"phrases",children:function(e,t){var a=t.add,n=t.remove;return Object(E.jsxs)(E.Fragment,{children:[e.map((function(e){return Object(E.jsxs)(O.b,{align:"baseline",size:120,children:[Object(E.jsx)(g.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.area!==t.area||e.sights!==t.sights},children:function(){return Object(E.jsx)(g.a.Item,Object(p.a)(Object(p.a)({},e),{},{label:"Phrase Name",name:[e.name,"phrase_name"],fieldKey:[e.fieldKey,"phrase_name"],rules:[{required:!0,message:"Missing Name"}],children:Object(E.jsxs)(b.a,{placeholder:"Please select a name",children:[Object(E.jsxs)(F,{value:"A",children:["A",Object(E.jsx)("span",{style:{visibility:"hidden"},children:"____________________"})]},"phrase_name_option_A"),Object(E.jsxs)(F,{value:"B",children:["B",Object(E.jsx)("span",{style:{visibility:"hidden"},children:"____________________"})]},"phrase_name_option_B"),Object(E.jsxs)(F,{value:"C",children:["C",Object(E.jsx)("span",{style:{visibility:"hidden"},children:"____________________"})]},"phrase_name_option_C"),Object(E.jsxs)(F,{value:"D",children:["D",Object(E.jsx)("span",{style:{visibility:"hidden"},children:"____________________"})]},"phrase_name_option_C")]})}))}}),Object(E.jsx)(g.a.Item,Object(p.a)(Object(p.a)({},e),{},{label:"Phrase Length",name:[e.name,"phrase_length"],fieldKey:[e.fieldKey,"phrase_length"],rules:[{required:!0,message:"Missing length"}],children:Object(E.jsxs)(b.a,{placeholder:"Please select a length",children:[Object(E.jsxs)(F,{value:4,children:["4",Object(E.jsx)("span",{style:{visibility:"hidden"},children:"_____________________"})]},"phrase_length_option_4"),Object(E.jsxs)(F,{value:8,children:["8",Object(E.jsx)("span",{style:{visibility:"hidden"},children:"_____________________"})]},"phrase_length_option_8")]})})),Object(E.jsx)(k.a,{onClick:function(){return n(e.name)}})]},e.key)})),Object(E.jsx)(g.a.Item,{children:Object(E.jsx)(v.a,{type:"dashed",onClick:function(){return a()},icon:Object(E.jsx)(C.a,{}),children:"Add Phrase"})})]})}})}),Object(E.jsx)(y.a,{orientation:"left",children:"Set Meta"}),Object(E.jsx)(g.a.Item,{name:"tonic",label:"Tonic",hasFeedback:!0,rules:[{required:!0,message:"Please select a tonic!"}],children:Object(E.jsx)(b.a,{placeholder:"Please select a tonic",children:R.map((function(e){return Object(E.jsx)(F,{value:e,children:e},"tonic_option_".concat(e))}))})}),Object(E.jsx)(g.a.Item,{name:"mode",label:"Mode",hasFeedback:!0,rules:[{required:!0,message:"Please select a mode!"}],children:Object(E.jsx)(b.a,{placeholder:"Please select a mode",children:z.map((function(e){return Object(E.jsx)(F,{value:e.value,children:e.ui},"mode_option_".concat(e))}))})}),Object(E.jsx)(g.a.Item,{name:"meter",label:"Meter",hasFeedback:!0,rules:[{required:!0,message:"Please select a meter!"}],children:Object(E.jsx)(b.a,{placeholder:"Please select a meter",children:N.map((function(e){return Object(E.jsx)(F,{value:e.value,disabled:"3/4"===e.value,children:e.ui},"meter_option_".concat(e))}))})}),Object(E.jsx)(y.a,{orientation:"left",children:"Set Style"}),Object(E.jsx)(g.a.Item,{name:"enable_chord_style",label:"Enable Chord Style Controlling",valuePropName:"checked",children:Object(E.jsx)(f.a,{checked:this.state.chordStyleControl,onChange:function(t){return e.setState({chordStyleControl:t.target.checked})}})}),Object(E.jsx)(g.a.Item,{name:"chord_style",label:"Chord Style",rules:[{required:!0,message:"Please select a style!"}],children:Object(E.jsx)(b.a,{placeholder:"Please select a style",disabled:!this.state.chordStyleControl,children:L.map((function(e){return Object(E.jsx)(F,{value:e.value,children:e.ui},"chord_style_option_".concat(e))}))})}),Object(E.jsx)(g.a.Item,{name:"enable_texture_style",label:"Enable Texture Style Controlling",valuePropName:"checked",children:Object(E.jsx)(f.a,{checked:this.state.textureStyleControl,onChange:function(t){return e.setState({textureStyleControl:t.target.checked})}})}),Object(E.jsx)(g.a.Item,{name:"rhythm_density",label:"Texture Rhythm Density (RD)",rules:[{required:!0,message:"Please select a RD!"}],children:Object(E.jsx)(_.a,{max:4,min:0,step:1,dots:!0,disabled:!this.state.textureStyleControl})}),Object(E.jsx)(g.a.Item,{name:"voice_number",label:"Texture Voice Number (VN)",rules:[{required:!0,message:"Please select a VN!"}],children:Object(E.jsx)(_.a,{max:4,min:0,step:1,dots:!0,disabled:!this.state.textureStyleControl})}),Object(E.jsx)(g.a.Item,{wrapperCol:{span:4,offset:11},style:{marginTop:"60px"},children:Object(E.jsx)(v.a,{type:"primary",htmlType:"submit",shape:"round",children:"Begin Generate"})})]})),Object(E.jsx)("div",{style:{minHeight:"100px"}})]})}}]),a}(r.Component),W=(a(519),a(302)),H=a(118),U=a(630),G=a(631),Y=a(619),K=a(624),Q=a(617),J=a(214),X=function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(E.jsx)("div",{children:Object(E.jsx)("svg",{t:"1636188018686",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2662",width:"32",height:"32",children:Object(E.jsx)("path",{d:"M906.666667 170.752a32 32 0 0 1 31.701333 27.648l0.298667 4.352v618.666667a32 32 0 0 1-27.648 31.701333l-4.352 0.298667H117.333333a32 32 0 0 1-31.701333-27.648L85.333333 821.418667v-618.666667a32 32 0 0 1 27.648-31.701333l4.352-0.298667h789.333334zM256 533.376H149.333333v256.042667h725.333334v-256.042667H768v159.957333a32 32 0 0 1-63.701333 4.352l-0.298667-4.352v-159.957333h-85.333333v159.957333a32 32 0 0 1-63.701334 4.352L554.666667 693.333333v-159.957333h-85.333334v159.957333a32 32 0 0 1-63.701333 4.352L405.333333 693.333333v-159.957333h-85.333333v159.957333a32 32 0 0 1-63.701333 4.352L256 693.333333v-159.957333z m618.666667-298.624h-725.333334v234.624h725.333334V234.752z m-480 85.333333a32 32 0 1 1 0 64 32 32 0 0 1 0-64z m341.333333-0.042666a32 32 0 0 1 4.352 63.701333l-4.352 0.298667h-106.666667a32 32 0 0 1-4.352-63.701334l4.352-0.298666h106.666667z m-469.333333-0.042667a32 32 0 1 1 0 64 32 32 0 0 1 0-64z","p-id":"2663"})})})}}]),a}(r.Component),Z=(a(520),a(613));function $(e){var t=e.midiURL,a=e.id,n=e.midiWithoutMelodyURL,s=e.additionalVisualizer,r=e.setAdditionalVisualizer,l=e.noteHeight,o=e.pixelsPerTimeStep,d=e.color,h=e.backgroundColor,u=i.a.useState(null),j=Object(c.a)(u,2),p=j[0],m=j[1],b=i.a.useState(null),g=Object(c.a)(b,2),y=g[0],x=g[1],O=i.a.useState(null),v=Object(c.a)(O,2),f=v[0],_=v[1],S=i.a.useState(null),k=Object(c.a)(S,2),C=k[0],T=k[1];i.a.useEffect((function(){Z.urlToNoteSequence(t).then((function(e){return m(e)})),void 0!==n&&Z.urlToNoteSequence(n).then((function(e){return x(e)}))}),[t,n]),i.a.useEffect((function(){if(void 0===n&&null!==p||void 0!==n&&null!==p&&null!==y){var e=new Z.Visualizer(n?y:p,document.getElementById(a),{noteHeight:l||6,pixelsPerTimeStep:o||26,noteSpacing:1,noteRGB:d||"0, 59, 118",activeNoteRGB:"225, 111, 34"}),t=new Z.SoundFontPlayer("https://storage.googleapis.com/magentadata/js/soundfonts/sgm_plus",void 0,void 0,void 0,{run:function(t){e.redraw(t),s&&s.redraw(t)},stop:function(){e.redraw(),s&&s.redraw()}});T(e),r&&r(e),_(t)}}),[p,y,s,r,n,a,l,o,d]);return Object(E.jsx)("canvas",{id:a,onClick:function(){"stopped"===f.getPlayState()?f.start(p):(f.stop(),C.redraw(),s&&s.redraw())},style:{display:"block",backgroundColor:h||!0}})}a(604);var ee=Y.a.Title,te=Y.a.Paragraph,ae=b.a.Option;function ne(e){var t=e.index,a=e.progression;function n(e){var t=e[0];return" "!==e[1]&&(t+=e[1]),"1"===e[2]&&(t+="m"),t}return i.a.useEffect((function(){for(var e=[],s=0;s<a.length;s++)e=e.concat(a[s]);for(var r=[],i="",l=0;l<e.length;l++)e[l]!==i&&(i=e[l],r.push([n(e[l]),8.4*l]));var o=document.getElementById("chord-text"+t).getContext("2d");o.font="20px Times New Roman";for(var c=0;c<r.length;c++)o.fillText(r[c][0],r[c][1],18)}),[]),Object(E.jsx)("canvas",{id:"chord-text"+t,width:540,height:20,style:{backgroundColor:"#fff7e6"}})}var se=function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={style:e.props.style,melodyVis:null},e.setMelodyVis=function(t){e.setState({melodyVis:t})},e.handleStyleChange=function(t){var a=e.props.father.state.styles;a[e.props.index]=t,e.props.father.setState({styles:a})},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.props.data.otherStyles;return Object(E.jsxs)("div",{className:"card",style:{width:"".concat(75*this.props.data.progression.length,"px")},children:[Object(E.jsx)("div",{style:{textAlign:"center"},children:Object(E.jsx)(ee,{level:3,style:{color:"gray",marginBottom:"0px"},children:Object(E.jsx)("a",{id:"b",href:!0,children:"PROGRESSION"})})}),Object(E.jsxs)("div",{style:{width:"50%",float:"left",marginTop:"20px"},children:[Object(E.jsx)(te,{style:{fontSize:"10px",color:"gray",marginLeft:"12px"},children:"Style"}),Object(E.jsx)(b.a,{value:this.state.style,autoFocus:!1,bordered:!1,style:{fontSize:"25px"},onSelect:this.handleStyleChange,children:L.map((function(e){return Object(E.jsx)(ae,{value:e.value,disabled:!re(t,e.value),children:e.ui})}))})]}),Object(E.jsx)("div",{style:{marginTop:"110px"}}),Object(E.jsx)($,{midiURL:s+"/midi/"+this.props.data.midi_name.melody,id:this.props.index+"melody",pixelsPerTimeStep:35,setAdditionalVisualizer:this.setMelodyVis}),Object(E.jsx)("div",{style:{marginTop:"20px"}}),Object(E.jsx)("div",{style:{marginTop:"10px"},children:Object(E.jsx)(ne,{index:this.props.index,progression:this.props.data.progression_full})}),Object(E.jsx)($,{midiURL:s+"/midi/"+this.props.data.midi_name.chord,midiWithoutMelodyURL:s+"/midi/"+this.props.data.midi_name.chord_WM,id:this.props.index+"chord",pixelsPerTimeStep:35,noteHeight:3,additionalVisualizer:this.state.melodyVis}),Object(E.jsx)("div",{style:{marginTop:"5px"}}),Object(E.jsx)($,{midiURL:s+"/midi/"+this.props.data.midi_name.acc,midiWithoutMelodyURL:s+"/midi/"+this.props.data.midi_name.acc_WM,id:this.props.index+"acc",pixelsPerTimeStep:35,noteHeight:3,additionalVisualizer:this.state.melodyVis}),Object(E.jsx)(v.a,{type:"dashed",style:{bottom:"20px",position:"absolute",width:"80%",left:"10%"},onClick:function(){return e.props.father.tryChangeAllStyle(e.state.style)},children:"Change all styles to current style"})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{style:e.style}}}]),a}(r.Component);function re(e,t){for(var a=e.length;a--;)if(e[a]===t)return!0;return!1}var ie=Y.a.Title,le=K.a.Meta,oe=["Preparing...","Loading melodies, initializing melody meta...","Analyzing melodies, constructing progressions...","Loading library, refining progressions according to styles...","Generating textures...","Synthesizing...","Complete!"];function ce(){var e=setInterval((function(){var t=document.body.scrollTop||document.documentElement.scrollTop,a=t/5;0!==document.body.scrollTop?document.body.scrollTop-=a:document.documentElement.scrollTop-=a,0===t&&clearInterval(e)}),30)}var de=function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(d.a)(this,a);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={generatingStage:0,generated:[],generatedChordName:null,generatedAccName:null,playing:"stop",textureStyleControl:e.props.values.enable_texture_style,styles:[]},e.count=0,e.calcDivWidth=function(){var t=0;return e.state.generated.forEach((function(e,a,n){t+=75*e.progression.length}),0),t+100+4*(e.state.generated.length+3)+2},e.playMp3=function(t){"stop"===e.state.playing?(e.mp3=new Audio(n+"/wav/".concat(Math.random())),e.mp3.play(),e.mp3.addEventListener("ended",(function(t){e.setState({playing:"stop"})})),e.setState({playing:"playing"})):"pause"===e.state.playing?(e.mp3.play(),e.setState({playing:"playing"})):"playing"===e.state.playing&&(e.setState({playing:"pause"}),e.mp3.pause())},e.askStage=function(){M("/stage_query",Object(m.a)(e),null,"get",null,e.askStageCallback),7===e.state.generatingStage&&(window.clearInterval(e.askStageInterval),M("/generated_query",Object(m.a)(e),null,"get",null,e.generateQueryCallback))},e.askStageCallback=function(t){"ok"===t.status&&e.setState({generatingStage:parseInt(t.stage)})},e.generateQueryCallback=function(t){"ok"===t.status&&e.setState({generated:t.log,styles:t.log.map((function(e){return e.style})),generatedChordName:t.chord_midi_name,generatedAccName:t.acc_midi_name})},e.regenerate=function(){var t=e.props.values;t.chord_style=e.state.styles,t.rhythm_density=e.refs.form.getFieldValue("rhythm_density"),t.voice_number=e.refs.form.getFieldValue("voice_number"),t.enable_texture_style=e.refs.form.getFieldValue("enable_texture_style"),M("/generate",Object(m.a)(e),null,"post",t),e.askStageInterval=setInterval(e.askStage,500),e.setState({generated:[],generatingStage:0,playing:"stop"}),ce()},e.tryChangeAllStyle=function(t){for(var a=[],n=0;n<e.state.generated.length;n++)he(e.state.generated[n].otherStyles,t)?a.push(t):a.push(e.state.styles[n]);e.setState({styles:a})},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.askStageInterval=setInterval(this.askStage,2e3)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.askStageInterval),this.setState({playing:"stop"}),this.mp3=null}},{key:"render",value:function(){var e=this;return Object(E.jsxs)("div",{children:[Object(E.jsxs)("div",{className:"upper",children:[Object(E.jsx)("div",{style:{width:"50%",float:"left",height:"100%"},children:Object(E.jsx)("div",{className:"status",children:oe.map((function(t,a){return a<e.state.generatingStage||a===e.state.generatingStage&&6===e.state.generatingStage?Object(E.jsxs)("p",{children:[Object(E.jsx)(W.a,{style:{marginRight:"6px"}}),t]}):a===e.state.generatingStage?Object(E.jsxs)("p",{children:[Object(E.jsx)(H.a,{style:{marginRight:"6px"}}),t]}):Object(E.jsx)("p",{})}))})}),Object(E.jsx)("div",{style:{width:"50%",float:"right",height:"100%"},children:0===this.state.generated.length?Object(E.jsxs)("div",{style:{paddingLeft:"50px",paddingRight:"50px",textAlign:"center"},children:[Object(E.jsx)(ie,{level:1,style:{float:"right",fontSize:"25px",color:"#AAAAAA",userSelect:"none"},children:"Generating, please wait..."}),Object(E.jsx)(y.a,{}),Object(E.jsx)(Q.a,{size:"large",style:{marginTop:"50px"}})]}):Object(E.jsxs)("div",{style:{paddingLeft:"50px",paddingRight:"50px"},children:[Object(E.jsx)(ie,{level:1,style:{float:"right",fontSize:"25px",color:"#AAAAAA",userSelect:"none"},children:"Progression generated!"}),Object(E.jsx)(y.a,{}),Object(E.jsx)("a",{download:"chord.mid",href:"".concat(s,"/midi/").concat(this.state.generatedChordName),children:Object(E.jsx)(K.a,{hoverable:!0,style:{marginTop:"10px",marginBottom:"10px"},children:Object(E.jsx)(le,{avatar:Object(E.jsx)(X,{which:"midi"}),title:Object(E.jsx)("div",{children:"Download Chords"}),description:"MIDI consist a melody track and a progression track"})})}),Object(E.jsx)("a",{download:"accompaniment.mid",href:"".concat(s,"/midi/").concat(this.state.generatedAccName),children:Object(E.jsx)(K.a,{hoverable:!0,style:{marginTop:"10px",marginBottom:"10px"},children:Object(E.jsx)(le,{avatar:Object(E.jsx)(X,{which:"midi"}),title:Object(E.jsx)("div",{children:"Download Accompaniment"}),description:"MIDI consist a melody track and a accompaniment track"})})})]})})]}),Object(E.jsx)("div",{className:"down",style:{marginBottom:"30px"},children:0===this.state.generated.length?Object(E.jsx)("div",{style:{width:"100%"},children:Object(E.jsx)(J.a,{style:{marginTop:"150px"},description:"Progression not generated yet."})}):Object(E.jsx)("div",{style:{minWidth:this.calcDivWidth()},children:Object(E.jsxs)("div",{style:{padding:"2px"},children:[Object(E.jsx)("div",{className:"card-start",children:Object(E.jsx)(U.a,{style:{lineHeight:"485px",fontSize:"25px"}})}),this.state.generated.map((function(t,a){return Object(E.jsx)(se,{data:t,father:e,index:a,style:e.state.styles[a]})})),Object(E.jsx)("div",{className:"card-end",children:Object(E.jsx)(G.a,{style:{lineHeight:"485px",fontSize:"25px"}})})]})})}),Object(E.jsxs)(g.a,{ref:"form",initialValues:{enable_texture_style:this.props.values.enable_texture_style,rhythm_density:this.props.values.rhythm_density,voice_number:this.props.values.voice_number},children:[Object(E.jsx)(g.a.Item,{name:"enable_texture_style",label:Object(E.jsx)("div",{children:"Enable texture style controlling"}),valuePropName:"checked",children:Object(E.jsx)(f.a,{checked:this.state.textureStyleControl,onChange:function(t){return e.setState({textureStyleControl:t.target.checked})}})}),Object(E.jsx)(g.a.Item,{name:"rhythm_density",label:Object(E.jsx)("div",{children:"Texture Rhythm Density (RD)"}),rules:[{required:!0,message:"Please select a RD!"}],children:Object(E.jsx)(_.a,{max:4,min:0,step:1,dots:!0,disabled:!this.state.textureStyleControl})}),Object(E.jsx)(g.a.Item,{name:"voice_number",label:Object(E.jsx)("div",{children:"Texture Voice Number (VN)"}),rules:[{required:!0,message:"Please select a VN!"}],children:Object(E.jsx)(_.a,{max:4,min:0,step:1,dots:!0,disabled:!this.state.textureStyleControl})})]}),Object(E.jsx)("div",{style:{marginTop:"50px",marginLeft:"20%",marginRight:"20%",textAlign:"center"},children:0===this.state.generated.length?Object(E.jsx)(v.a,{shape:"round",type:"primary",size:"large",style:{height:"40px"},disabled:!0,children:Object(E.jsx)("div",{style:{fontSize:"16px"},children:"Re-generate subject to the selected styles"})}):Object(E.jsx)(v.a,{shape:"round",type:"primary",size:"large",style:{height:"40px"},onClick:this.regenerate,children:Object(E.jsx)("div",{style:{fontSize:"16px"},children:"Re-generate subject to the selected styles"})})}),Object(E.jsx)("div",{style:{minHeight:"50px"}})]})}}]),a}(r.Component);function he(e,t){for(var a=e.length;a--;)if(e[a]===t)return!0;return!1}var ue=a(625),je=(a(611),ue.a.Step),pe=Y.a.Title,me={title:"Set Parameters",des:"Upload melodies."},be={title:"Generate Accompaniment",des:"Choose the best."};var ge=function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).onSubmit=function(t,a){e.setState({step:1,values:a}),function(){var e=setInterval((function(){var t=document.body.scrollTop||document.documentElement.scrollTop,a=t/4;0!==document.body.scrollTop?document.body.scrollTop-=a:document.documentElement.scrollTop-=a,0===t&&clearInterval(e)}),30)}()},e.state={step:0,values:[]},V.a.subscribe("submit",e.onSubmit),e}return Object(h.a)(a,[{key:"render",value:function(){return Object(E.jsxs)("div",{children:[Object(E.jsxs)("div",{className:"head",children:[Object(E.jsx)("a",{href:"/",children:Object(E.jsxs)(pe,{level:1,style:{float:"left",marginTop:"0px",fontSize:"55px"},className:"title",children:[Object(E.jsx)("span",{style:{color:"#003b76"},children:"A"}),"cco",Object(E.jsx)("span",{style:{color:"#003b76"},children:"M"}),"ontage",Object(E.jsx)("span",{style:{color:"#003b76"},children:"2"})]})}),Object(E.jsxs)(ue.a,{current:this.state.step,style:{maxWidth:"500px",float:"right",marginTop:"10px",marginBottom:"20px"},children:[Object(E.jsx)(je,{title:me.title,description:me.des}),Object(E.jsx)(je,{title:be.title,description:be.des})]})]}),Object(E.jsx)(y.a,{style:{marginBottom:"50px",backgroundColor:"#003b76"}}),0===this.state.step?Object(E.jsx)(q,{}):Object(E.jsx)(de,{values:this.state.values})]})}}]),a}(r.Component),ye=a(623),xe=a(317),Oe=a(422),ve=Object(E.jsxs)("div",{style:{paddingLeft:"5%",paddingRight:"5%"},children:[Object(E.jsx)(Y.a.Title,{level:4,children:"What are required before generation?"}),Object(E.jsx)(Y.a.Title,{level:5,children:"Melody"}),Object(E.jsx)(Y.a.Paragraph,{children:"AccoMonatage2 needs a leading melody to generate accompaniment. Please drag the melody to the box or click to upload your melody piece. Melody must be a single-track MIDI file (or multi-track with the melody piece at the first track)."}),Object(E.jsx)(Y.a.Title,{level:5,children:"Phrases (segmentation)"}),Object(E.jsx)(Y.a.Paragraph,{children:"You must also specify the phrases of the uploaded melody. Each phrase has a name and a length. Phrases with the same name are considered as similar phrases when generating textures. Currently, the length of the phrases only supports 4-bar and 8-bar. Please make sure your melody can fit in the phrase structures."}),Object(E.jsx)(Y.a.Title,{level:5,children:"Tonic & mode & meter"}),Object(E.jsx)(Y.a.Paragraph,{children:"You must specify a tonic, mode, and meter for the melody. For example, a melody piece in C Major key and four fourths beat has tonic=C, mode=Major, meter=4/4. Note that currently only 4/4 is supported."}),Object(E.jsx)(Y.a.Title,{level:5,children:"Chord style"}),Object(E.jsxs)(Y.a.Paragraph,{children:["The chord style control is optional. You can click on ",Object(E.jsx)(Y.a.Text,{code:!0,children:"Enable Chord Style Controlling"})," to activate chord style control. Currently, there are 4 styles in total, AccoMonatage2 will tend to use the selected style to harmonize the melody (but not guaranteed)."]}),Object(E.jsx)(Y.a.Title,{level:5,children:"Texture style"}),Object(E.jsx)(Y.a.Paragraph,{children:"The texture style control is also optional. Five levels of rhythm density and voice number are available."})]}),fe=Object(E.jsxs)("div",{style:{paddingLeft:"5%",paddingRight:"5%"},children:[Object(E.jsx)(Y.a.Title,{level:4,children:"When generating..."}),Object(E.jsx)(Y.a.Paragraph,{children:"Please wait patiently, due to the limited server resource, the generating process might take 1-2 minutes. You can view the process on the left part."}),Object(E.jsx)(Y.a.Title,{level:4,children:"After generated"}),Object(E.jsx)(Y.a.Title,{level:5,children:"Listen and download"}),Object(E.jsx)(Y.a.Paragraph,{children:"You may click to download the generated MIDI file (chord or accompaniment). You can aslo listen to the audio of each phrase separately by clicking the piano roll."}),Object(E.jsx)(Y.a.Title,{level:5,children:"Change style and re-generate"}),Object(E.jsx)(Y.a.Paragraph,{children:"The choosen chord style of each phrase is displayed. You can click on and choose a new style. Some styles may not be available. You can also change the texture style of the whole melody. Click on the button at the bottom to re-generate based on new styles."})]}),_e=Object(E.jsxs)("div",{style:{paddingLeft:"5%",paddingRight:"5%"},children:[Object(E.jsx)(Y.a.Title,{level:5,children:"Why the generation result is not satisfying?"}),Object(E.jsx)(Y.a.Paragraph,{children:"There might be multiple reasons. Please go through the following check list to improve the output result."}),Object(E.jsx)(Y.a.Paragraph,{children:Object(E.jsxs)("ul",{children:[Object(E.jsxs)("li",{children:[Object(E.jsx)(Y.a.Text,{strong:!0,children:"Blank melody at the begining. "}),"AccoMontage2 marks the first bar of the melody as the begining of the first phrase. If your melody have a piece of blank at the begining and you are not willing to make it part of your phrase, please remove it (including anacrusis)."]}),Object(E.jsxs)("li",{children:[Object(E.jsx)(Y.a.Text,{strong:!0,children:"Melody is too sparse. "}),"AccoMontage2 generates only based on the melody. Please make sure the melody have enough notes for reference. Sparce melody might also produce dissatisfying results."]}),Object(E.jsxs)("li",{children:[Object(E.jsx)(Y.a.Text,{strong:!0,children:"Melody not monophonic. "}),"AccoMontage2 prefers monophonic music. That is to say, the melody is expected to have at most one note playing at any moment."]}),Object(E.jsxs)("li",{children:[Object(E.jsx)(Y.a.Text,{strong:!0,children:"Tempo too large or too small. "}),"In most cases, AccoMonatage2 will harmonize a bar with a single chord. If this is not your wish, you can modify the tempo to a suitable range (usually tempo between 70-120 will produce good results)."]}),Object(E.jsxs)("li",{children:[Object(E.jsx)(Y.a.Text,{strong:!0,children:"Wrong tonic/mode/meter. "}),"This might cause the algorithm to generate someting that is completely wrong."]})]})}),Object(E.jsx)(Y.a.Paragraph,{children:"If you are very sure that the above problem is already solved, you can also try other chord styles and texture styles, or even phrase structures (e.g., split an 8-bar phrase into two 4-bar phrases)."}),Object(E.jsx)(Y.a.Title,{level:5,children:"Why the generation fails?"}),Object(E.jsxs)(Y.a.Paragraph,{children:["Please make sure the phrase label is correct. Currently, a limitation is the melody cannot exceed the labeled phrases. Please make sure your last note is within the provided phrases. Other bugs please contact ",Object(E.jsx)("a",{href:!0,children:"ly1387@nyu.edu"}),"."]})]});var Se=function(){var e=i.a.useState(!1),t=Object(c.a)(e,2),a=t[0],n=t[1],s=function(){n(!1)};return Object(E.jsxs)("div",{children:[Object(E.jsxs)(v.a,{shape:"link",style:{marginLeft:"92%",marginTop:"20px"},onClick:function(){return n(!0)},children:[Object(E.jsx)(Oe.a,{}),"Help"]}),Object(E.jsx)("div",{className:"App",children:Object(E.jsx)(ge,{})}),Object(E.jsx)("div",{style:{minHeight:"50px",textAlign:"center",backgroundColor:"#003b76"},children:Object(E.jsx)("h4",{style:{color:"white",paddingTop:"10px"},children:"Interface for AccoMontage2. Copyright \xa9 2022 NYU Shanghai Music X Lab."})}),Object(E.jsx)(ye.a,{title:"AccoMonatage2 GUI Help",visible:a,width:800,onOk:s,onCancel:s,footer:[Object(E.jsx)(v.a,{type:"primary",onClick:s,children:"Ok"})],children:Object(E.jsxs)(xe.a,{defaultActiveKey:"1",centered:!0,children:[Object(E.jsx)(xe.a.TabPane,{tab:"Set Parameters Page",children:ve},"1"),Object(E.jsx)(xe.a.TabPane,{tab:"Generating Page",children:fe},"2"),Object(E.jsx)(xe.a.TabPane,{tab:"Other Q&A",children:_e},"3")]})})]})};a(612);o.a.render(Object(E.jsx)(i.a.StrictMode,{children:Object(E.jsx)(Se,{})}),document.getElementById("root"))}},[[614,1,2]]]);
//# sourceMappingURL=main.e54d97ab.chunk.js.map